<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
      <title>ModLib | Rain World Modding Made Easier | ModLib </title>
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <meta name="title" content="ModLib | Rain World Modding Made Easier | ModLib ">
      
      
      <link rel="icon" href="favicon.ico">
      <link rel="stylesheet" href="public/docfx.min.css">
      <link rel="stylesheet" href="public/main.css">
      <meta name="docfx:navrel" content="toc.html">
      <meta name="docfx:tocrel" content="toc.html">
      
      <meta name="docfx:rel" content="">
      
      
      <meta name="docfx:docurl" content="https://github.com/AydenTFoxx/ModLib/blob/devel/README.md/#L1">
      <meta name="loc:inThisArticle" content="In this article">
      <meta name="loc:searchResultsCount" content="{count} results for &quot;{query}&quot;">
      <meta name="loc:searchNoResults" content="No results for &quot;{query}&quot;">
      <meta name="loc:tocFilter" content="Filter by title">
      <meta name="loc:nextArticle" content="Next">
      <meta name="loc:prevArticle" content="Previous">
      <meta name="loc:themeLight" content="Light">
      <meta name="loc:themeDark" content="Dark">
      <meta name="loc:themeAuto" content="Auto">
      <meta name="loc:changeTheme" content="Change theme">
      <meta name="loc:copy" content="Copy">
      <meta name="loc:downloadPdf" content="Download PDF">

      <script type="module" src="./public/docfx.min.js"></script>

      <script>
        const theme = localStorage.getItem('theme') || 'auto'
        document.documentElement.setAttribute('data-bs-theme', theme === 'auto' ? (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light') : theme)
      </script>

  </head>

  <body class="tex2jax_ignore" data-layout="" data-yaml-mime="">
    <header class="bg-body border-bottom">
      <nav id="autocollapse" class="navbar navbar-expand-md" role="navigation">
        <div class="container-xxl flex-nowrap">
          <a class="navbar-brand" href="index.html">
            <img id="logo" class="svg" src="logo.svg" alt="ModLib">
            ModLib
          </a>
          <button class="btn btn-lg d-md-none border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navpanel" aria-controls="navpanel" aria-expanded="false" aria-label="Toggle navigation">
            <i class="bi bi-three-dots"></i>
          </button>
          <div class="collapse navbar-collapse" id="navpanel">
            <div id="navbar">
              <form class="search" role="search" id="search">
                <i class="bi bi-search"></i>
                <input class="form-control" id="search-query" type="search" disabled placeholder="Search" autocomplete="off" aria-label="Search">
              </form>
            </div>
          </div>
        </div>
      </nav>
    </header>

    <main class="container-xxl">

      <div class="content">
        <div class="actionbar">

          <nav id="breadcrumb"></nav>
        </div>

        <article data-uid="">
<h1 id="modlib--rain-world-modding-made-easier">ModLib | Rain World Modding Made Easier</h1>

<p>ModLib is a collection of tools and features made with the goal of streamlining Rain Worlds mod development.
Features are created with usability as first priority, and designed to be compatible with common modding frameworks (e.g. Improved Input Config: Extended) out-of-the-box.</p>
<p>A proper documentation/wiki is in the works, but the entirety of ModLib's API is documented in code;
To provide IntelliSense for ModLib classes and methods, include <code>ModLib.xml</code> in your references alongside the main DLL file.</p>
<h2 id="features">Features</h2>
<p>At its core, ModLib is not a revolutionary solution; Most of its features have been done (and inspired by) other mods, often in a manual, per-use-case approach.
Instead, what ModLib primarily provides is a common API, a collection of time-tested solutions to common issues faced by modders alike.</p>
<blockquote>
<p>(TODO: Make greater use of this shared API, simplifying interoperability between mods)</p>
</blockquote>
<p>Nonetheless, some features (notably <code>CompatibilityManager</code>'s ability to detect mods even before the game initializes) are rarely seen elsewhere, and provide a convenient way for modders to use such tools without concerning themselves with their implementation.</p>
<h3 id="logging">Logging</h3>
<p>ModLib has built-in integration with LogUtils, offering a quick and convenient API for creating logger instances for your mod.
This logger instance automatically targets your mod's BepInEx logger, and logs to a separate file at <code>StreamingAssets/Logs/YourModName.log</code>.</p>
<p>When LogUtils is not available, your mod's BepInEx logger is used as a fallback, ensuring logs are never lost regardless of the available tools at runtime.</p>
<blockquote>
<p>(TODO: Revive old <code>Logger.cs</code> and adapt it to be a fallback logger instead of solely relying on BepInEx's)</p>
</blockquote>
<h3 id="remix">REMIX</h3>
<p>ModLib has a variety of tools for creating and managing options from your mod's REMIX option interface.
Option management, online sync, and even temporary overrides are all handled by ModLib, while requiring as little user input as possible.</p>
<blockquote>
<p>(TODO: Return overrides values to their original values when a temporary option is removed)
(TODO? Add a duration for temporary options? Feels more like a user responsibility... Too specific to be made into a general-purpose tool)</p>
</blockquote>
<ul>
<li>(Optional) Create REMIX interfaces in a familiar fashion with <code>OptionBuilder</code>. Chain methods to create simple yet effective interfaces, then convert them to an <code>OpTab</code> instance with <code>Build()</code></li>
<li>At your mod registering[^registry], include a reference to the class where you implement your REMIX interface.</li>
<li>To access any given value at runtime, call one of OptionUtils' static methods: <code>IsOptionEnabled</code>, <code>IsOptionValue&lt;T&gt;</code>, or <code>GetOptionValue&lt;T&gt;</code>. You can either pass a reference to the <code>Configurable&lt;T&gt;</code> field, or use its ID value directly.
<ul>
<li>Additionally, cosmetic or client-sided options can instead be checked with the variants <code>IsClientOptionEnabled</code>, <code>IsClientOptionValue&lt;T&gt;</code>, and <code>GetClientOptionValue&lt;T&gt;</code>. Note these don't allow you to specify an ID directly, however.</li>
</ul>
</li>
</ul>
<p>If the Rain Meadow mod is present, option values are automatically synced between the host and clients, ensuring your mod works as expected in an online context. When leaving a lobby, the client's options return to their original values.</p>
<blockquote>
<p>(TODO: Force a refresh of the local <code>OptionUtils.SharedOptions</code> instance when no longer online? Seems only useful in a few edge cases, but relevant nonetheless)</p>
</blockquote>
<p>Temporary options can also be created and removed with <code>OptionUtils.SharedOptions.AddTemporaryOption</code> and <code>RemoveTemporaryOption</code>, respectively.
Temporary options do not alter the saved REMIX option values, instead overriding their representation at runtime. After removing them and refreshing the option holder (with <code>OptionUtils.SharedOptions.RefreshOptions()</code>), they return to their original values.</p>
<h3 id="input-handling">Input Handling</h3>
<p>ModLib allows the creation of <em>immutable</em> keybinds, using the <code>Keybind</code> class. When the Improved Input Config: Extended mod is present, an equivalent <code>PlayerKeybind</code> object is automatically registered, allowing players to edit it via that mod's interface instead.</p>
<p><code>Keybind</code> objects are convertible to and from <code>PlayerKeybind</code> instances, so any API accepting a <code>PlayerKeybind</code> is also compatible with ModLib's <code>Keybind</code> class.</p>
<blockquote>
<p>(TODO: Make both conversions implicit, so the two classes are as interchangeable as allowed by C#)</p>
</blockquote>
<p>While <code>Keybind</code> objects can be queries for input directly, their true power comes from using them alongside the <code>InputHandler</code> class (or one of its extension methods): When IIC:E is present, calls with <code>Keybind</code> objects are automatically converted to <code>PlayerKeybind</code> ones, where the relevant APIs are used instead.</p>
<blockquote>
<p>(TODO? Make <code>Keybind</code> methods also inherit this functionality, juust to be sure. If there are two ways to do something, someone will use the less effective one at some point.)</p>
</blockquote>
<h3 id="rain-meadow-compatibility">Rain Meadow Compatibility</h3>
<p>Several utilities are available for implementing Rain Meadow compatibility, including the extension methods from <code>ModRPCManager</code> (for sending and processing time-limited <code>RPCEvent</code>s), and the suite of methods and properties from <code>MeadowUtils</code> (for general interaction with online sessions).</p>
<p>ModLib itself uses those same provided APIs to implement automatic syncing of REMIX options.</p>
<h3 id="and-others">And others...</h3>
<p>Weak reference collections, compatibility management for implementing interoperability with other mods, automatic error handling of methods (and, in particular, IL hooks); An ever-growing collection of tools for just about any project you could imagine.</p>
<h2 id="getting-started">Getting Started</h2>
<h3 id="installation">Installation</h3>
<p>To use ModLib in your projects, download the file <code>ModLib.dll</code> at <code>mod/newest/plugins</code>, then include it as a referenced assembly in your project:</p>
<pre><code class="lang-csproj">&lt;PropertyGroup&gt;
    &lt;Reference Include=&quot;path/to/ModLib.dll&quot;&gt;
        &lt;Private&gt;false&lt;/Private&gt;
    &lt;/Reference&gt;
&lt;/PropertyGroup&gt;
</code></pre>
<p>Optionally, you can also download <code>ModLib.xml</code> for IntelliSense support to all public classes and methods, if your editor of choice has such feature.
When building your mod, make sure to also include a copy of <code>ModLib.dll</code> on the same folder as your mod's assembly. Including <code>LogUtils.dll</code> is strongly recommended, but not required if you do not need a separate file for your mod's logs.</p>
<h3 id="usage">Usage</h3>
<p>To use ModLib's features, you must first register your mod. This can be done in one of two ways:</p>
<ol>
<li>Have your entry point class (the one with a <code>BepInPlugin</code> attribute) extend <code>ModLib.ModPlugin</code>. This will ensure your mod is registered as soon as it is loaded by BepInEx. Additionally, <code>ModPlugin</code> itself offers a general &quot;interface&quot; of virtual methods, which you can override to include your mod's content as well.</li>
<li>Alternatively, you can register your mod directly by calling <code>Registry.RegisterMod</code>, including a reference to your entry point class, and optionally a reference to your REMIX option interface class and/or a logger instance for usage by your mod. If the last is not provided, ModLib creates a new one and assigns it to your mod during registering.</li>
</ol>
<p>Once registered, you can access your mod's data with <code>Registry.MyMod</code>. If for any reason you want to remove your mod from ModLib's registry, calling <code>Registry.RemoveMod()</code> will discard all saved data tied to your mod. However, you won't be able to use methods which require registry until you register your mod again.</p>
<blockquote>
<p>![WARN]
Registering a mod ties the calling <em>assembly</em> to the generated data. I.e. it is currently not supported to have more than one <code>BepInPlugin</code> registered per mod assembly.</p>
</blockquote>
<h2 id="licensing">Licensing</h2>
<p>As a project created primarily through the compilation of knowledge from many others far more experienced than me, ModLib is entirely dedicated to the Rain World modding community.
You are free to use ModLib's code, assets, or any other features at no charge or further requirements; To the extent of what is allowed by law, you are free to do with this project as you wish.</p>
<p>Attribution is appreciated, but not required. My primary goal is to make modding as accessible as possible, so more cool things can be done by more new modders :)</p>
<h2 id="contributing">Contributing</h2>
<p>If you want to contribute to ModLib in some way, that's greatly appreciated! Pull requests are merged as soon as I can ensure no bugs or regressions are introduced with the latest changes, and issues help a ton with figuring out what pain points of the current API need to be worked on at a greater priority.</p>
<p>If you don't feel like coding (or already got a large-scale project where ModLib would be of little use), but know someone who might find use in it, then consider sharing ModLib with them! Word of mouth is a powerful asset, and an equally appreciated contribution! ^^</p>

</article>

        <div class="contribution d-print-none">
          <a href="https://github.com/AydenTFoxx/ModLib/blob/devel/README.md/#L1" class="edit-link">Edit this page</a>
        </div>

        <div class="next-article d-print-none border-top" id="nextArticle"></div>

      </div>

      <div class="affix">
        <nav id="affix"></nav>
      </div>
    </main>

    <div class="container-xxl search-results" id="search-results"></div>

    <footer class="border-top text-secondary">
      <div class="container-xxl">
        <div class="flex-fill">
          <span>Made with <a href="https://dotnet.github.io/docfx">docfx</a></span>
        </div>
      </div>
    </footer>
  </body>
</html>
